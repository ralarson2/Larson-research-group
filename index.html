<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Larson Research Group</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --accent: #1b7c6d;
      --accent-light: #e2f3f0;
      --dark: #143541;
      --text: #222222;
      --bg: #f7f9fb;
      --card: #ffffff;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    header {
      background: var(--card);
      border-bottom: 1px solid #dde3ea;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .nav-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .nav-title {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--dark);
      white-space: nowrap;
    }

    .nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 0.9rem;
    }

    .nav-links a {
      padding-bottom: 0.15rem;
      border-bottom: 2px solid transparent;
    }

    .nav-links a:hover {
      border-color: var(--accent);
      text-decoration: none;
    }

    .hero {
      background: radial-gradient(circle at top left, var(--accent-light), var(--bg));
      border-bottom: 1px solid #dde3ea;
    }

    .hero-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 2.5rem 1rem 2.5rem 1rem;
    }

    .hero-title {
      font-size: clamp(2rem, 3vw, 2.4rem);
      color: var(--dark);
      margin-bottom: 0.5rem;
    }

    .hero-subtitle {
      font-size: 1.05rem;
      max-width: 36rem;
      margin-bottom: 1rem;
    }

    .hero-note {
      font-size: 0.9rem;
      color: #4b5c67;
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 2.5rem 1rem 3rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 2.5rem;
    }

    section {
      scroll-margin-top: 4.5rem;
    }

    .section-title {
      font-size: 1.4rem;
      color: var(--dark);
      margin-bottom: 0.5rem;
    }

    .section-text {
      font-size: 0.96rem;
      margin-bottom: 0.8rem;
      max-width: 44rem;
    }

    .card {
      background: var(--card);
      border-radius: 0.9rem;
      border: 1px solid #dde3ea;
      padding: 1.1rem 1.25rem;
      box-shadow: 0 8px 20px rgba(15, 35, 52, 0.04);
      font-size: 0.95rem;
      margin-top: 0.6rem;
    }

    .fact-list a {
      display: block;
      margin-bottom: 0.25rem;
      font-size: 0.94rem;
    }

    .small-note {
      font-size: 0.84rem;
      color: #4b5c67;
      margin-top: 0.4rem;
    }

    #uganda-data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    #uganda-data-table th,
    #uganda-data-table td {
      border: 1px solid #dde3ea;
      padding: 0.4rem 0.5rem;
      text-align: left;
      white-space: nowrap;
    }

    #uganda-data-table th {
      background: #eef3f7;
      font-weight: 500;
    }

    #uganda-status {
      font-size: 0.88rem;
      margin-top: 0.4rem;
      color: #4b5c67;
    }

    footer {
      border-top: 1px solid #dde3ea;
      padding: 1.2rem 1rem 2rem 1rem;
      font-size: 0.8rem;
      color: #6b7c88;
    }

    .footer-inner {
      max-width: 960px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.6rem;
    }

    @media (max-width: 720px) {
      .nav-inner {
        flex-direction: column;
        align-items: flex-start;
      }
      .nav-links {
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-inner">
      <div class="nav-title">Larson Research Group</div>
      <nav class="nav-links">
        <a href="#about">About</a>
        <a href="#uganda">Uganda air quality</a>
        <a href="#factsheets">Fact sheets</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <section class="hero" id="about">
    <div class="hero-inner">
      <div class="hero-title">Sustainable systems, agriculture, and air quality</div>
      <p class="hero-subtitle">
        Research on manure and waste systems, waste to energy systems, sustainable agricuture, manure management, and decision-support tools that connect science with practice.
      </p>
      <p class="hero-note">
        This site is under active construction. Content and links will be updated over time.
      </p>
    </div>
  </section>

  <main>
    <section id="uganda">
      <div class="section-title">Uganda air quality project</div>
      <p class="section-text">
        This project uses low-cost sensors and modeling to understand air quality in Uganda.
        The section below pulls recent measurements from the AirQo API for the project cohort.
      </p>

      <div class="card">
        <p>Recent measurements (example view of a few devices, latest values):</p>
        <div id="uganda-status">Loading data from AirQo…</div>
        <div style="overflow-x:auto; margin-top:0.5rem;">
          <table id="uganda-data-table" style="display:none;">
            <thead>
              <tr>
                <th>Device</th>
                <th>Time</th>
                <th>PM2.5</th>
                <th>PM10</th>
                <th>AQI category</th>
              </tr>
            </thead>
            <tbody id="uganda-data-body"></tbody>
          </table>
        </div>
        <p class="small-note">
          Data source: AirQo network API for the Uganda cohort. This view is for demonstration and can be customized later.
        </p>
      </div>
    </section>

    <section id="factsheets">
      <div class="section-title">Fact sheets and resources</div>
      <p class="section-text">
        This section will link to downloadable fact sheets on manure management, sustainable agricuture, dairy systems, manure safety, 
        and related topics. Replace the example links below with your real URLs.
      </p>

      <div class="card">
        <div class="fact-list">
          <a href="https://cdn.shopify.com/s/files/1/0145/8808/4272/files/A4192-001.pdf" target="_blank" rel="noopener">
            Anaerobic Digestion from Animal Manure
          </a>
          <a href="https://cdn.shopify.com/s/files/1/0145/8808/4272/files/A4192-001.pdf" target="_blank" rel="noopener">
            Struvite Recovery from Manure
          </a>
          <a href="https://example.com/factsheets/short-lived-climate-pollutants.pdf" target="_blank" rel="noopener">
            Example fact sheet: Short-lived climate pollutants
          </a>
        </div>
        <p class="small-note">
          To add your real fact sheets, upload them somewhere stable (for example UW, Box, or another host)
          and replace the example URLs above with your actual links. You can add as many fact sheets as you need
          by copying one of the lines and changing the link and text.
        </p>
      </div>
    </section>

    <section id="contact">
      <div class="section-title">Contact</div>
      <p class="section-text">
        Brief contact information can go here. Replace the placeholders with your details.
      </p>

      <div class="card">
        <p>Email: <a href="rebecca.larson@wisc.edu">rebecca.larson@wisc.edu</a></p>
        <p>Affiliation: University of Wisconsin–Madison</p>
        <p>Notes for students or collaborators can go here.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <div>Larson Research Group · University of Wisconsin–Madison</div>
      <div>Hosted on GitHub Pages</div>
    </div>
  </footer>

  <script>
    async function loadUgandaData() {
      const statusEl = document.getElementById("uganda-status");
      const table = document.getElementById("uganda-data-table");
      const tbody = document.getElementById("uganda-data-body");

      try {
        const response = await fetch("https://api.airqo.net/api/v2/devices/measurements/cohorts/68d4e669670d2e0013c85375?token=V6ZFRJXEAGRKRSYU");
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        const data = await response.json();

        const measurements = data.measurements || data.results || [];
        if (!measurements.length) {
          statusEl.textContent = "No recent measurements available.";
          return;
        }

        const recent = measurements.slice(0, 10);
        tbody.innerHTML = "";

        recent.forEach(item => {
          const tr = document.createElement("tr");

          const device = item.device || item.device_id || "Unknown";
          const time = item.time || item.created_at || "";
          const pm25 = item.pm2_5 && item.pm2_5.value !== undefined ? item.pm2_5.value : "";
          const pm10 = item.pm10 && item.pm10.value !== undefined ? item.pm10.value : "";
          const category = item.category || (item.health_tips && item.health_tips.category) || "";

          function fmt(val) {
            if (val === "" || val === null || val === undefined) return "";
            const num = Number(val);
            if (isNaN(num)) return val;
            return num.toFixed(1);
          }

          tr.innerHTML = `
            <td>${device}</td>
            <td>${time}</td>
            <td>${fmt(pm25)}</td>
            <td>${fmt(pm10)}</td>
            <td>${category}</td>
          `;
          tbody.appendChild(tr);
        });

        statusEl.textContent = "";
        table.style.display = "";
      } catch (err) {
        statusEl.textContent = "Could not load data from AirQo right now.";
      }
    }

    loadUgandaData();
  </script>
</body>
</html>
